{% extends 'network/base.html' %}

{% block title %}DHCP Request - DHCP Simulator{% endblock %}

{% block content %}
<h1 class="text-center mb-4">üåê DHCP Address Assignment</h1>

<div class="row">
    <div class="col-md-6 mx-auto">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Request IP Address</h5>
                
                {% if error %}
                <div class="alert alert-danger">{{ error }}</div>
                {% endif %}

                <form method="post">
                    {% csrf_token %}
                    
                    <div class="mb-3">
                        <label class="form-label">{{ form.mac_address.label }}</label>
                        {{ form.mac_address }}
                        <small class="form-text text-muted">{{ form.mac_address.help_text }}</small>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">{{ form.dhcp_version.label }}</label>
                        {{ form.dhcp_version }}
                    </div>
                    
                    <button type="submit" class="btn btn-primary w-100">Assign IP Address</button>
                </form>
            </div>
        </div>
    </div>
</div>

{% if result %}
<div class="result-card mt-4">
    <h5>‚úÖ IP Address Assigned Successfully</h5>
    
    <div class="result-item">
        <strong>MAC Address:</strong> {{ result.mac_address }}
    </div>
    
    <div class="result-item">
        <strong>DHCP Version:</strong> {{ result.dhcp_version }}
    </div>
    
    <div class="result-item">
        <strong>Assigned IP:</strong> 
        <span class="badge bg-success">{{ result.assigned_ip }}</span>
    </div>
    
    <div class="result-item">
        <strong>Lease Time:</strong> {{ result.lease_time }}
    </div>
    
    <div class="result-item">
        <strong>MAC Byte Sum Parity:</strong> {{ result.mac_sum_parity }}
    </div>
    
    <div class="result-item">
        <strong>Timestamp:</strong> {{ result.timestamp }}
    </div>
    
    {% if result.db_error %}
    <div class="alert alert-warning mt-3">{{ result.db_error }}</div>
    {% else %}
    <div class="alert alert-info mt-3">‚úì Lease saved to MongoDB</div>
    {% endif %}
</div>
{% endif %}

<div class="text-center mt-4">
    <a href="{% url 'network:leases' %}" class="btn btn-outline-primary">View All Leases</a>
</div>
{% endblock %}
